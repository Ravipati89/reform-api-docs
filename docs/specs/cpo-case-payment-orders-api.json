{"swagger":"2.0","info":{"description":"Case payment orders","version":"1.0.0","title":"Case Payment Orders API","contact":{"name":"CDM","url":"https://tools.hmcts.net/confluence/display/RCCD/Reform%3A+Core+Case+Data+Home","email":"corecasedatateam@hmcts.net"}},"host":"localhost","basePath":"/","tags":[{"name":"case-payment-orders-controller","description":"Case Payment Orders Controller"}],"paths":{"/case-payment-orders":{"get":{"tags":["case-payment-orders-controller"],"summary":"Get payment orders for a case","description":"Get payment orders for a case","operationId":"getCasePaymentOrdersUsingGET","produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"name":"case_ids","in":"query","description":"list of ccd case reference numbers","required":false,"type":"array","items":{"type":"string"},"collectionFormat":"multi"},{"name":"ids","in":"query","description":"list of case payment orders ids","required":false,"type":"array","items":{"type":"string"},"collectionFormat":"multi"},{"in":"query","name":"page","description":"page number, indexes from (0,1) to page-size.","required":false},{"in":"header","name":"ServiceAuthorization","description":"Valid Service-to-Service JWT token for a whitelisted micro-service","required":true},{"in":"query","name":"size","description":"page size","required":false}],"responses":{"200":{"schema":{"$ref":"#/definitions/Page«CasePaymentOrder»"}},"400":{"description":"One or more of the following reasons:\n1) Case payment orders cannot be filtered by both id and case id.\n2) Case ID has to be a valid 16-digit Luhn number.\n3) ID is invalid.","examples":{"application/json":"{\n   \"status\": \"400\",\n   \"error\": \"Bad Request\",\n   \"message\": \"Input not valid\",\n   \"path\": \"/case-payment-orders\",\n   \"details\": [ \"Case ID has to be a valid 16-digit Luhn number.\" ]\n}"},"schema":{"type":"string"}},"401":{"description":"Authentication failure due to invalid / expired tokens (IDAM / S2S)."},"403":{"description":"Unauthorised S2S service."},"404":{"description":"The following Case Payment Orders do not exist : "}}},"post":{"tags":["case-payment-orders-controller"],"summary":"Create Case Payment Order","description":"Create Case Payment Order","operationId":"createCasePaymentOrderRequestUsingPOST","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"in":"body","name":"requestPayload","description":"requestPayload","required":true,"schema":{"$ref":"#/definitions/Create Case Payment Order Request"}},{"in":"header","name":"ServiceAuthorization","description":"Valid Service-to-Service JWT token for a whitelisted micro-service","required":true}],"responses":{"201":{"description":"Case Payment Order Created","schema":{"$ref":"#/definitions/CasePaymentOrder"}},"400":{"description":"One or more of the following reasons:\n1) Case ID has to be a valid 16-digit Luhn number.\n2) Case ID is required.\n3) Action is required.\n4) Responsible Party is required.\n5) Order Reference has invalid format.\n6) Order Reference is required.\n7) Idam ID cannot be retrieved.","examples":{"application/json":"{\n   \"status\": \"400\",\n   \"error\": \"Bad Request\",\n   \"message\": \"Input not valid\",\n   \"path\": \"/case-payment-orders\",\n   \"details\": [ \"Case ID has to be a valid 16-digit Luhn number.\" ]\n}"},"schema":{"type":"string"}},"401":{"description":"Authentication failure due to invalid / expired tokens (IDAM / S2S)."},"403":{"description":"Unauthorised S2S service."},"409":{"description":"A case payment order with the specified Order Reference already exists on the case."}}},"put":{"tags":["case-payment-orders-controller"],"summary":"Update Case Payment Order","description":"Updates a case payment order","operationId":"updateCasePaymentOrderRequestUsingPUT","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"in":"body","name":"requestPayload","description":"requestPayload","required":true,"schema":{"$ref":"#/definitions/Update Case Payment Order Request"}},{"in":"header","name":"ServiceAuthorization","description":"Valid Service-to-Service JWT token for a whitelisted micro-service","required":true}],"responses":{"202":{"description":"Case Payment Order Updated","schema":{"$ref":"#/definitions/CasePaymentOrder"}},"400":{"description":"One or more of the following reasons:\n1) ID is invalid.\n2) ID is required.\n3) Case ID has to be a valid 16-digit Luhn number.\n4) Case ID is required.\n5) Action is required.\n6) Responsible Party is required.\n7) Order Reference has invalid format.\n8) Order Reference is required.\n9) Idam ID cannot be retrieved.","examples":{"application/json":"{\n   \"status\": \"400\",\n   \"error\": \"Bad Request\",\n   \"message\": \"Input not valid\",\n   \"path\": \"/case-payment-orders\",\n   \"details\": [ \"ID is required.\" ]\n}"},"schema":{"type":"string"}},"401":{"description":"Authentication failure due to invalid / expired tokens (IDAM / S2S)."},"403":{"description":"Unauthorised S2S service."},"404":{"description":"Case Payment Order does not exist."},"409":{"description":"A case payment order with the specified Order Reference already exists on the case."}}},"delete":{"tags":["case-payment-orders-controller"],"summary":"Delete specified case payment orders","operationId":"deleteCasePaymentOrdersByIdUsingDELETE","produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"name":"case_ids","in":"query","description":"list of Case IDs","required":false,"type":"array","items":{"type":"string"},"collectionFormat":"multi"},{"name":"ids","in":"query","description":"list of IDs","required":false,"type":"array","items":{"type":"string"},"collectionFormat":"multi"},{"in":"header","name":"ServiceAuthorization","description":"Valid Service-to-Service JWT token for a whitelisted micro-service","required":true}],"responses":{"204":{"description":"Case Payment Orders Deleted"},"400":{"description":"One or more of the following reasons:\n1) ID is invalid.\n2) Case ID has to be a valid 16-digit Luhn number.\n3) Cannot delete Case Payment Orders by both ids and case-ids","examples":{"application/json":"{\n   \"status\": \"400\",\n   \"error\": \"Bad Request\",\n   \"message\": \"Input not valid\",\n   \"path\": \"/case-payment-orders\",\n   \"details\": [ \"Cannot delete Case Payment Orders by both ids and case-ids\" ]\n}"},"schema":{"type":"string"}},"401":{"description":"Authentication failure due to invalid / expired tokens (IDAM / S2S)."},"403":{"description":"Unauthorised S2S service."},"404":{"description":"The following Case Payment Orders do not exist : "}}}}},"definitions":{"CasePaymentOrder":{"type":"object","properties":{"action":{"type":"string"},"case_id":{"type":"integer","format":"int64"},"created_by":{"type":"string"},"created_timestamp":{"type":"string","example":"yyyy-MM-dd'T'HH:mm:ss'Z'"},"history_exists":{"type":"boolean"},"id":{"type":"string","format":"uuid"},"order_reference":{"type":"string"},"responsible_party":{"type":"string"}},"title":"CasePaymentOrder"},"Create Case Payment Order Request":{"type":"object","required":["action","case_id","order_reference","responsible_party"],"properties":{"action":{"type":"string","example":"Case Submit","description":"Action that initiated the creation of the case payment order"},"case_id":{"type":"string","example":2061729969689088,"description":"Case Id for which the record applies"},"order_reference":{"type":"string","example":"2021-1122334455667","description":"Description of the Payments system order reference","pattern":"^2[0-9]{3}-[0-9]{13}$"},"responsible_party":{"type":"string","example":"Jane Doe","description":"Description of the party responsible for the case payment order"}},"title":"Create Case Payment Order Request"},"Pageable":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"page_number":{"type":"integer","format":"int32"},"page_size":{"type":"integer","format":"int32"},"paged":{"type":"boolean"},"sort":{"$ref":"#/definitions/Sort"},"unpaged":{"type":"boolean"}},"title":"Pageable"},"Page«CasePaymentOrder»":{"type":"object","properties":{"content":{"type":"array","items":{"$ref":"#/definitions/CasePaymentOrder"}},"empty":{"type":"boolean"},"first":{"type":"boolean"},"last":{"type":"boolean"},"number":{"type":"integer","format":"int32"},"number_of_elements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/definitions/Pageable"},"size":{"type":"integer","format":"int32"},"sort":{"$ref":"#/definitions/Sort"},"total_elements":{"type":"integer","format":"int64"},"total_pages":{"type":"integer","format":"int32"}},"title":"Page«CasePaymentOrder»"},"Sort":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}},"title":"Sort"},"Update Case Payment Order Request":{"type":"object","required":["action","case_id","id","order_reference","responsible_party"],"properties":{"action":{"type":"string","example":"Case Submit","description":"Action that initiated the creation of the case payment order"},"case_id":{"type":"string","example":2061729969689088,"description":"Case Id for which the record applies"},"id":{"type":"string","example":"77d30e7f-ead9-4529-a499-6bf8b0f2d08e","description":"Case Payment Order ID to update"},"order_reference":{"type":"string","example":"2021-1122334455667","description":"Description of the Payments system order reference","pattern":"^2[0-9]{3}-[0-9]{13}$"},"responsible_party":{"type":"string","example":"Jane Doe","description":"Description of the party responsible for the case payment order"}},"title":"Update Case Payment Order Request"}}}
